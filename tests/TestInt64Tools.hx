package tests;

import utest.Assert;
import utest.ITest;

using fount.Core;

class TestInt64Tools implements ITest {
    public function new() {}

    static final HEX_VALUES = [
        "0000000000000000",
        "0000000000000001",
        "0000000000000002",
        "0000000000000003",
        "0000000000000004",
        "0000000000000005",
        "0000000000000006",
        "0000000000000007",
        "0000000000000008",
        "0000000000000009",
        "000000000000000a",
        "000000000000000b",
        "000000000000000c",
        "000000000000000d",
        "000000000000000e",
        "000000000000000f",
        "0000000000000010",
        "0000000000000011",
        "0000000000000012",
        "0000000000000013",
        "0000000000000014",
        "0000000000000015",
        "0000000000000016",
        "0000000000000017",
        "0000000000000018",
        "0000000000000019",
        "000000000000001a",
        "000000000000001b",
        "000000000000001c",
        "000000000000001d",
        "000000000000001e",
        "000000000000001f",
        "0000000000000020",
        "0000000000000021",
        "0000000000000022",
        "0000000000000023",
        "0000000000000024",
        "0000000000000025",
        "0000000000000026",
        "0000000000000027",
        "0000000000000028",
        "0000000000000029",
        "000000000000002a",
        "000000000000002b",
        "000000000000002c",
        "000000000000002d",
        "000000000000002e",
        "000000000000002f",
        "0000000000000030",
        "0000000000000031",
        "0000000000000032",
        "0000000000000033",
        "0000000000000034",
        "0000000000000035",
        "0000000000000036",
        "0000000000000037",
        "0000000000000038",
        "0000000000000039",
        "000000000000003a",
        "000000000000003b",
        "000000000000003c",
        "000000000000003d",
        "000000000000003e",
        "000000000000003f",
        "0000000000000040",
        "0000000000000041",
        "0000000000000042",
        "0000000000000043",
        "0000000000000044",
        "0000000000000045",
        "0000000000000046",
        "0000000000000047",
        "0000000000000048",
        "0000000000000049",
        "000000000000004a",
        "000000000000004b",
        "000000000000004c",
        "000000000000004d",
        "000000000000004e",
        "000000000000004f",
        "0000000000000050",
        "0000000000000051",
        "0000000000000052",
        "0000000000000053",
        "0000000000000054",
        "0000000000000055",
        "0000000000000056",
        "0000000000000057",
        "0000000000000058",
        "0000000000000059",
        "000000000000005a",
        "000000000000005b",
        "000000000000005c",
        "000000000000005d",
        "000000000000005e",
        "000000000000005f",
        "0000000000000060",
        "0000000000000061",
        "0000000000000062",
        "0000000000000063",
        "0000000000000064",
        "0000000000000065",
        "0000000000000066",
        "0000000000000067",
        "0000000000000068",
        "0000000000000069",
        "000000000000006a",
        "000000000000006b",
        "000000000000006c",
        "000000000000006d",
        "000000000000006e",
        "000000000000006f",
        "0000000000000070",
        "0000000000000071",
        "0000000000000072",
        "0000000000000073",
        "0000000000000074",
        "0000000000000075",
        "0000000000000076",
        "0000000000000077",
        "0000000000000078",
        "0000000000000079",
        "000000000000007a",
        "000000000000007b",
        "000000000000007c",
        "000000000000007d",
        "000000000000007e",
        "000000000000007f",
        "0000000000000080",
        "0000000000000081",
        "0000000000000082",
        "0000000000000083",
        "0000000000000084",
        "0000000000000085",
        "0000000000000086",
        "0000000000000087",
        "0000000000000088",
        "0000000000000089",
        "000000000000008a",
        "000000000000008b",
        "000000000000008c",
        "000000000000008d",
        "000000000000008e",
        "000000000000008f",
        "0000000000000090",
        "0000000000000091",
        "0000000000000092",
        "0000000000000093",
        "0000000000000094",
        "0000000000000095",
        "0000000000000096",
        "0000000000000097",
        "0000000000000098",
        "0000000000000099",
        "000000000000009a",
        "000000000000009b",
        "000000000000009c",
        "000000000000009d",
        "000000000000009e",
        "000000000000009f",
        "00000000000000a0",
        "00000000000000a1",
        "00000000000000a2",
        "00000000000000a3",
        "00000000000000a4",
        "00000000000000a5",
        "00000000000000a6",
        "00000000000000a7",
        "00000000000000a8",
        "00000000000000a9",
        "00000000000000aa",
        "00000000000000ab",
        "00000000000000ac",
        "00000000000000ad",
        "00000000000000ae",
        "00000000000000af",
        "00000000000000b0",
        "00000000000000b1",
        "00000000000000b2",
        "00000000000000b3",
        "00000000000000b4",
        "00000000000000b5",
        "00000000000000b6",
        "00000000000000b7",
        "00000000000000b8",
        "00000000000000b9",
        "00000000000000ba",
        "00000000000000bb",
        "00000000000000bc",
        "00000000000000bd",
        "00000000000000be",
        "00000000000000bf",
        "00000000000000c0",
        "00000000000000c1",
        "00000000000000c2",
        "00000000000000c3",
        "00000000000000c4",
        "00000000000000c5",
        "00000000000000c6",
        "00000000000000c7",
        "00000000000000c8",
        "00000000000000c9",
        "00000000000000ca",
        "00000000000000cb",
        "00000000000000cc",
        "00000000000000cd",
        "00000000000000ce",
        "00000000000000cf",
        "00000000000000d0",
        "00000000000000d1",
        "00000000000000d2",
        "00000000000000d3",
        "00000000000000d4",
        "00000000000000d5",
        "00000000000000d6",
        "00000000000000d7",
        "00000000000000d8",
        "00000000000000d9",
        "00000000000000da",
        "00000000000000db",
        "00000000000000dc",
        "00000000000000dd",
        "00000000000000de",
        "00000000000000df",
        "00000000000000e0",
        "00000000000000e1",
        "00000000000000e2",
        "00000000000000e3",
        "00000000000000e4",
        "00000000000000e5",
        "00000000000000e6",
        "00000000000000e7",
        "00000000000000e8",
        "00000000000000e9",
        "00000000000000ea",
        "00000000000000eb",
        "00000000000000ec",
        "00000000000000ed",
        "00000000000000ee",
        "00000000000000ef",
        "00000000000000f0",
        "00000000000000f1",
        "00000000000000f2",
        "00000000000000f3",
        "00000000000000f4",
        "00000000000000f5",
        "00000000000000f6",
        "00000000000000f7",
        "00000000000000f8",
        "00000000000000f9",
        "00000000000000fa",
        "00000000000000fb",
        "00000000000000fc",
        "00000000000000fd",
        "00000000000000fe",
        "00000000000000ff"
    ];

    function test_toHexStr_on_negative_values() {
        Assert.equals("ffffffffffffffff", (-1).asInt64().toHexStr());
        Assert.equals("fffffffffffffffe", (-2).asInt64().toHexStr());
    }

    function test_toHexStr_on_values() {
        for (i => str in HEX_VALUES) Assert.equals(str, i.asInt64().toHexStr());
    }

    function test_rol() {
        for (i in 0...128) {
            Assert.isTrue(0.asInt64() == 0.asInt64().rol(i));
            Assert.isTrue((1.asInt64() << (i & 63)) == 1.asInt64().rol(i));
            Assert.isTrue(-1.asInt64() == (-1).asInt64().rol(i));
            Assert.isTrue((~(1.asInt64() << (i & 63))) == (-2).asInt64().rol(i));
        }
    }
}
